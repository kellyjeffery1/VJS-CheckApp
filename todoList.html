<!DOCTYPE html>
<html>
  <head>
    <title>Todo list</title>
  </head>
  </head>
  <body>
    <h1>Todo List!</h1>
    <div>
      <button onClick="handlers.displayTodos()">Display Todos</button>
      <button onClick="handlers.toggleAll()">Toggle all</button>
    </div>
    
    <div>
      <button onClick="handlers.addTodo()">Add todos</button>
      <input id="addTodoTextInput" type='text'></input>
    </div>

    <div>
      <button onClick="handlers.changeTodo()">Change todo</button>
      <input id="changeTodoPositionInput" type='number'></input>
      <input id="changeTodoTextInput" type='text'></input>
    </div>

    <div>
      <button onClick="handlers.deleteTodo()">Delete</button>
      <input id='deleteTodoPositionInput' type="number"></input>
    </div>

    <div>
      <button onClick="handlers.toggleCompleted()">Completed</button>
      <input id='toggleCompletedPositionInput' type="number"></input>
    </div>

    <ul>
    </ul>
    
   <script>

     const todoList = {
       todos: [],
       displayTodos: function(){
         console.log('My Todos:');
         if (this.todos.length === 0){
           console.log('your array is empty!');
         } else {
           console.log('My Todos:');
           for (let i = 0; i < this.todos.length; i++){
             if(this.todos[i].completed === true){
               console.log('(x)',this.todos[i].todoText);
             } else {
               console.log('( )',this.todos[i].todoText);
             }
           }
         }  
       },
       addTodo: function(todoText){
        //  debugger;
         this.todos.push({ 
           todoText: todoText,
           completed: false
         });
         this.displayTodos();
       },
       changeTodo: function(position, todoText){
         this.todos[position].todoText = todoText;
         ;
         this.displayTodos();
       },
       deleteTodo: function(position){
         this.todos.slice(position, 1);
         this.displayTodos();
       },
       toggleCompleted: function(position){
         const todo = this.todos[position];
         todo.completed = !todo.completed; 
         this.displayTodos();
       },
       toggleAll: function(){
        //  debugger;
         const totalTodos = this.todos.legnth;
         const completedTodos = 0
        //  get number of completed todos
         for(const i = 0; i < totalTodos; i++){
           if(this.todos[i].completed === true){
             completedTodos++;
           }
         }
         // case 1:if everything is true make everything false. 
         if(completedTodos === totalTodos){
          // make everything false
          for (const i = 0; i < totalTodos; i++){
            this.todos[i].completed = false
          }
          // case 2: make everything true 
         } else {
           for(const i = 0; i < totalTodos; i++){
             this.todos[i].completed === true;

           }
         }
         this.displayTodos();
       }
     }


     const handlers = {
       displayTodos: function(){
       todoList.displayTodos();
       },
       toggleAll: function(){
       todoList.toggleAll();
       },
       addTodo: function(){
         const addTodoTextInput = document.getElementById('addTodoTextInput');
         todoList.addTodo('addTodoTextInput.value');
         addTodoTextInput.value = " ";
       },
       changeTodo: function(){
         const changeTodoPositionInput = document.getElementById('changeTodoPositionInput');
         const changeTodoTextInput = document.getElementById('changeTodoTextInput');
         todoList.changeTodo(changeTodoPositionInput.valueAsNumber, changeTodoTextInput.value);
         changeTodoPositionInput.value = "";
         changeTodoTextInput.value = "";
       },
       deleteTodo: function(){
         const deleteTodoPositionInput = document.getElementById('deleteTodoPositionInput');
         todoList.deleteTodo(deleteTodoPositionInput.valueAsNumber);
         deleteTodoPositionInput.value = "";
       },
       toggleCompleted: function(){
         const toggleCompletedPositionInput = document.getElementById('toggleCompletedPositionInput');
         todoList.toggleCompleted('toggleCompletedPositionInput.valueAsNumber');
         toggleCompletedPositionInput.value = "";
       },
     };

     const view = {
       displayTodos: function(){
         const todosUl = document.querySelector('ul');
         todosUl.innerHTML = ' ';
         for (const i = 0; i < todoList.todos.legnth; 1++){
         const todoLi = document.createElement('li');
         const todoTextWithCompletion = '';
         const todo = todoList.todos[i]
         if(todo.completed === true){
           todoTextWithCompletion = '(x) '+ todo.todoText;
         }else{
            todoTextWithCompletion = '( ) ' + todo.todoText
         }
         todoLi.todoText = todoTextWithCompletion






         todoLi.textContent = todoList.todos[i].todoText;
         todosUL.appendChild(todoLi);
         }
       }
     };

   </script>
  </body>
</html>